FROM docker.io/bitnamilegacy/spark:latest

USER root

# Create the spark user with UID 1001 and GID 1001
RUN groupadd -g 1001 spark || true && \
    useradd -u 1001 -g 1001 -m -s /bin/bash spark || true && \
    chown -R 1001:1001 /opt/bitnami/spark

USER 1001

